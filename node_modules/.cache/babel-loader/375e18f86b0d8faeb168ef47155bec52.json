{"ast":null,"code":"// redux 层开发\nimport { fromJS } from 'immutable';\nimport { getRankListRequest } from '../../../api/request'; //constants\n\nexport const CHANGE_RANK_LIST = 'home/rank/CHANGE_RANK_LIST';\nexport const CHANGE_LOADING = 'home/rank/CHANGE_LOADING'; //actionCreator\n\nconst changeRankList = data => ({\n  type: CHANGE_RANK_LIST,\n  data: fromJS(data)\n});\n\nconst changeLoading = data => ({\n  type: CHANGE_LOADING,\n  data\n});\n\nexport const getRankList = () => {\n  return dispatch => {\n    getRankListRequest().then(data => {\n      let list = data && data.list;\n      dispatch(changeRankList(list));\n      dispatch(changeLoading(false));\n    });\n  };\n}; //reducer \n\nconst defaultState = fromJS({\n  rankList: [],\n  loading: true\n});\n\nconst reducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case CHANGE_RANK_LIST:\n      return state.set('rankList', action.data);\n\n    case CHANGE_LOADING:\n      return state.set('loading', action.data);\n\n    default:\n      return state;\n  }\n};\n\nexport { reducer };","map":{"version":3,"sources":["C:/Users/86136/Desktop/学习进度/new_html/fullstack_yyf/react/cloud-music/src/application/Rank/store/index.js"],"names":["fromJS","getRankListRequest","CHANGE_RANK_LIST","CHANGE_LOADING","changeRankList","data","type","changeLoading","getRankList","dispatch","then","list","defaultState","rankList","loading","reducer","state","action","set"],"mappings":"AAAA;AACA,SAAQA,MAAR,QAAqB,WAArB;AACA,SAAQC,kBAAR,QAAiC,sBAAjC,C,CAEA;;AACA,OAAO,MAAMC,gBAAgB,GAAG,4BAAzB;AACP,OAAO,MAAMC,cAAc,GAAG,0BAAvB,C,CAEP;;AACA,MAAMC,cAAc,GAAIC,IAAD,KAAW;AAC9BC,EAAAA,IAAI,EAACJ,gBADyB;AAE9BG,EAAAA,IAAI,EAACL,MAAM,CAACK,IAAD;AAFmB,CAAX,CAAvB;;AAKA,MAAME,aAAa,GAAIF,IAAD,KAAW;AAC7BC,EAAAA,IAAI,EAAEH,cADuB;AAE7BE,EAAAA;AAF6B,CAAX,CAAtB;;AAKA,OAAO,MAAMG,WAAW,GAAG,MAAM;AAC7B,SAAOC,QAAQ,IAAI;AACfR,IAAAA,kBAAkB,GACbS,IADL,CACUL,IAAI,IAAI;AACV,UAAIM,IAAI,GAAEN,IAAI,IAAIA,IAAI,CAACM,IAAvB;AACAF,MAAAA,QAAQ,CAACL,cAAc,CAACO,IAAD,CAAf,CAAR;AACAF,MAAAA,QAAQ,CAACF,aAAa,CAAC,KAAD,CAAd,CAAR;AACH,KALL;AAMH,GAPD;AAQH,CATM,C,CAWP;;AACA,MAAMK,YAAY,GAAGZ,MAAM,CAAC;AACxBa,EAAAA,QAAQ,EAAC,EADe;AAExBC,EAAAA,OAAO,EAAC;AAFgB,CAAD,CAA3B;;AAKA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAAGJ,YAAT,EAAsBK,MAAtB,KAAiC;AAC7C,UAAOA,MAAM,CAACX,IAAd;AACI,SAAKJ,gBAAL;AACI,aAAOc,KAAK,CAACE,GAAN,CAAU,UAAV,EAAqBD,MAAM,CAACZ,IAA5B,CAAP;;AACJ,SAAKF,cAAL;AACI,aAAOa,KAAK,CAACE,GAAN,CAAU,SAAV,EAAoBD,MAAM,CAACZ,IAA3B,CAAP;;AACJ;AACI,aAAOW,KAAP;AANR;AAQH,CATD;;AAWA,SAAQD,OAAR","sourcesContent":["// redux 层开发\r\nimport {fromJS} from 'immutable';\r\nimport {getRankListRequest} from '../../../api/request';\r\n\r\n//constants\r\nexport const CHANGE_RANK_LIST = 'home/rank/CHANGE_RANK_LIST';\r\nexport const CHANGE_LOADING = 'home/rank/CHANGE_LOADING';\r\n\r\n//actionCreator\r\nconst changeRankList = (data) => ({\r\n    type:CHANGE_RANK_LIST,\r\n    data:fromJS(data)\r\n})\r\n\r\nconst changeLoading = (data) => ({\r\n    type: CHANGE_LOADING,\r\n    data\r\n})\r\n\r\nexport const getRankList = () => {\r\n    return dispatch => {\r\n        getRankListRequest()\r\n            .then(data => {\r\n                let list =data && data.list;\r\n                dispatch(changeRankList(list));\r\n                dispatch(changeLoading(false))\r\n            })\r\n    }\r\n}\r\n\r\n//reducer \r\nconst defaultState = fromJS({\r\n    rankList:[],\r\n    loading:true\r\n})\r\n\r\nconst reducer = (state = defaultState,action) => {\r\n    switch(action.type){\r\n        case CHANGE_RANK_LIST:\r\n            return state.set('rankList',action.data);\r\n        case CHANGE_LOADING:\r\n            return state.set('loading',action.data);\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport {reducer};"]},"metadata":{},"sourceType":"module"}