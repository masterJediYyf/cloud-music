{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\86136\\\\Desktop\\\\\\u5B66\\u4E60\\u8FDB\\u5EA6\\\\new_html\\\\fullstack_yyf\\\\react\\\\cloud-music\\\\src\\\\application\\\\Singer\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { CSSTransition } from 'react-transition-group';\nimport { Container, ImgWrapper, CollectButton, BgLayer, SongListWrapper } from './style';\nimport Header from \"../../baseUI/header\";\nimport Scroll from '../../baseUI/scroll';\nimport SongList from \"../SongList\";\nimport { HEADER_HEIGHT } from '../../api/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst artist = {\n  picUrl: \"https://p2.music.126.net/W__FCWFiyq0JdPtuLJoZVQ==/109951163765026271.jpg\",\n  name: \"薛之谦\",\n  hotSongs: [{\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  }, {\n    name: \"我好像在哪见过你\",\n    ar: [{\n      name: \"薛之谦\"\n    }],\n    al: {\n      name: \"薛之谦专辑\"\n    }\n  } // 省略 20 条\n  ]\n};\n\nfunction Singer(props) {\n  _s();\n\n  const [showStatus, setShowStatus] = useState(true);\n  const collectButton = useRef();\n  const imageWrapper = useRef();\n  const songScrollWrapper = useRef();\n  const songScroll = useRef();\n  const header = useRef();\n  const layer = useRef(); // 图片初始高度\n\n  const initialHeight = useRef(0); // 往上偏移的尺寸，露出圆角\n\n  const OFFSET = 5;\n  useEffect(() => {\n    let h = imageWrapper.current.offsetHeight;\n    songScrollWrapper.current.style.top = `${h - OFFSET}px`;\n    initialHeight.current = h; // 把遮罩先放在下面，以裹住歌曲列表\n\n    layer.current.style.top = `${h - OFFSET}px`;\n    songScroll.current.refresh(); //eslint-disable-next-line\n  }, []);\n  const setShowStatusFalse = useCallback(() => {\n    setShowStatus(false);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CSSTransition, {\n    in: showStatus,\n    timeout: 300,\n    classNames: \"fly\",\n    appear: true,\n    unmountOnExit: true,\n    onExited: () => props.history.goBack(),\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        handleClick: setShowStatusFalse,\n        title: artist.name,\n        ref: header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ImgWrapper, {\n        ref: imageWrapper,\n        bgUrl: artist.picUrl,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CollectButton, {\n        ref: collectButton,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"iconfont\",\n          children: \"\\uE62D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text\",\n          children: \" \\u6536\\u85CF \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(BgLayer, {\n        ref: layer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SongListWrapper, {\n        ref: songScrollWrapper,\n        children: /*#__PURE__*/_jsxDEV(Scroll, {\n          ref: songScroll,\n          onScroll: handleScroll,\n          children: /*#__PURE__*/_jsxDEV(SongList, {\n            songs: artist.hotSongs,\n            showCollect: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 7\n  }, this);\n}\n\n_s(Singer, \"sIAPdOvFiQH2kBYwavNKGdsC2Kg=\");\n\n_c = Singer;\nexport default Singer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Singer\");","map":{"version":3,"sources":["C:/Users/86136/Desktop/学习进度/new_html/fullstack_yyf/react/cloud-music/src/application/Singer/index.js"],"names":["React","useState","useRef","useEffect","useCallback","CSSTransition","Container","ImgWrapper","CollectButton","BgLayer","SongListWrapper","Header","Scroll","SongList","HEADER_HEIGHT","artist","picUrl","name","hotSongs","ar","al","Singer","props","showStatus","setShowStatus","collectButton","imageWrapper","songScrollWrapper","songScroll","header","layer","initialHeight","OFFSET","h","current","offsetHeight","style","top","refresh","setShowStatusFalse","history","goBack","handleScroll"],"mappings":"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","sourcesContent":["import React ,{useState,useRef,useEffect,useCallback}from \"react\";\r\nimport {CSSTransition} from 'react-transition-group';\r\nimport {Container,ImgWrapper,CollectButton,BgLayer,SongListWrapper} from './style';\r\nimport Header from \"../../baseUI/header\";\r\nimport Scroll from '../../baseUI/scroll';\r\nimport SongList from \"../SongList\";\r\nimport {HEADER_HEIGHT} from '../../api/config';\r\n\r\nconst artist = {\r\n    picUrl: \"https://p2.music.126.net/W__FCWFiyq0JdPtuLJoZVQ==/109951163765026271.jpg\",\r\n    name: \"薛之谦\",\r\n    hotSongs: [\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      },\r\n      {\r\n        name: \"我好像在哪见过你\",\r\n        ar: [{name: \"薛之谦\"}],\r\n        al: {\r\n          name: \"薛之谦专辑\"\r\n        }\r\n      }\r\n      // 省略 20 条\r\n    ]\r\n  }\r\n\r\nfunction Singer(props){\r\n    const [showStatus,setShowStatus] = useState(true);\r\n\r\n    const collectButton = useRef ();\r\n    const imageWrapper = useRef ();\r\n    const songScrollWrapper = useRef ();\r\n    const songScroll = useRef ();\r\n    const header = useRef ();\r\n    const layer = useRef ();\r\n    // 图片初始高度\r\n    const initialHeight = useRef (0);\r\n\r\n    // 往上偏移的尺寸，露出圆角\r\n    const OFFSET = 5;\r\n\r\n    useEffect (() => {\r\n      let h = imageWrapper.current.offsetHeight;\r\n      songScrollWrapper.current.style.top = `${h - OFFSET}px`;\r\n      initialHeight.current = h;\r\n      // 把遮罩先放在下面，以裹住歌曲列表\r\n      layer.current.style.top = `${h - OFFSET}px`;\r\n      songScroll.current.refresh ();\r\n      //eslint-disable-next-line\r\n    }, []);\r\n\r\n    const setShowStatusFalse = useCallback (() => {\r\n      setShowStatus (false);\r\n    }, []);\r\n\r\n    return (\r\n      <CSSTransition\r\n        in={showStatus}\r\n        timeout={300}\r\n        classNames=\"fly\"\r\n        appear={true}\r\n        unmountOnExit\r\n        onExited={() => props.history.goBack ()}\r\n      >\r\n        <Container>\r\n          <Header\r\n            handleClick={setShowStatusFalse}\r\n            title={artist.name}\r\n            ref={header}\r\n          ></Header>\r\n          <ImgWrapper ref={imageWrapper} bgUrl={artist.picUrl}>\r\n            <div className=\"filter\"></div>\r\n          </ImgWrapper>\r\n          <CollectButton ref={collectButton}>\r\n            <i className=\"iconfont\">&#xe62d;</i>\r\n            <span className=\"text\"> 收藏 </span>\r\n          </CollectButton>\r\n          <BgLayer ref={layer}></BgLayer>\r\n          <SongListWrapper ref={songScrollWrapper}>\r\n            <Scroll ref={songScroll} onScroll={handleScroll}>\r\n              <SongList\r\n                songs={artist.hotSongs}\r\n                showCollect={false}\r\n              ></SongList>\r\n            </Scroll>\r\n          </SongListWrapper>\r\n        </Container>\r\n      </CSSTransition>\r\n    )\r\n}\r\n\r\nexport default Singer;"]},"metadata":{},"sourceType":"module"}