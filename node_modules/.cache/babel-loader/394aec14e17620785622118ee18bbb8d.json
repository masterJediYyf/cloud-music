{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\86136\\\\Desktop\\\\\\u5B66\\u4E60\\u8FDB\\u5EA6\\\\new_html\\\\fullstack_yyf\\\\react\\\\cloud-music\\\\src\\\\application\\\\Singers\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Horizen from '../../baseUI/horizen-item';\nimport { categoryTypes, alphaTypes } from '../../api/config';\nimport { NavContainer, ListContainer, List, ListItem } from './style';\nimport { getSingerList, getHotSingerList, changeEnterLoading, changePageCount, refreshMoreSingerList, changePullUpLoading, changePullDownLoading, refreshMoreHotSingerList } from './store/actionCreators';\nimport Scroll from \"../../baseUI/scroll\";\nimport { connect } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst singerList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map(item => {\n  return {\n    picUrl: \"https://p2.music.126.net/uTwOm8AEFFX_BYHvfvFcmQ==/109951164232057952.jpg\",\n    name: \"隔壁老樊\",\n    accountId: 277313426\n  };\n}); // 渲染函数 返回歌手列表\n\nconst renderSingerList = () => {\n  return /*#__PURE__*/_jsxDEV(List, {\n    children: singerList.map((item, index) => {\n      return /*#__PURE__*/_jsxDEV(ListItem, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"img_wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `${item.picUrl}?param=300x300`,\n            width: \"100%\",\n            height: \"100%\",\n            alt: \"music\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 27\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"name\",\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 25\n        }, this)]\n      }, item.accountId + \"\" + index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 25\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 9\n  }, this);\n};\n\nconst mapStateToProps = state => ({\n  singerList: state.getIn(['singers', 'singerList']),\n  enterLoading: state.getIn(['singers', 'enterLoading']),\n  pullUpLoading: state.getIn(['singers', 'pullUpLoading']),\n  pullDownLoading: state.getIn(['singers', 'pullDownLoading']),\n  pageCount: state.getIn(['singers', 'pageCount'])\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getHotSingerDispatch() {\n      dispatch(getHotSingerList());\n    },\n\n    updateDispatch(category, alpha) {\n      dispatch(changePageCount(0)); //由于改变了分类,所以 pageCount 清零\n\n      dispatch(changeEnterLoading(true)); //loading，现在实现控制逻辑，效果实现放到下一节，后面的loading同理\n\n      dispatch(getSingerList(category, alpha));\n    },\n\n    //滑到最底部刷新部分的处理\n    pullUpRefreshDispatch(category, alpha, hot, count) {\n      dispatch(changePullDownLoading(true));\n      dispatch(changePageCount(count + 1));\n\n      if (hot) {\n        dispatch(refreshMoreSingerList());\n      } else {\n        dispatch(refreshMoreSingerList(category, alpha));\n      }\n    },\n\n    //顶部下拉刷新\n    pullDownRefreshDispatch(category, alpha) {\n      dispatch(changePullUpLoading(true));\n      dispatch(changePageCount(0)); //属于重新获取数据\n\n      if (category === '' && alpha === '') {\n        dispatch(getHotSingerList());\n      } else {\n        dispatch(getSingerList(category, alpha));\n      }\n    }\n\n  };\n};\n\nfunction Singers(props) {\n  _s();\n\n  let [category, setCategory] = useState('');\n  let [alpha, setAlpha] = useState('');\n\n  let handleUpdateAlpha = val => {\n    setAlpha(val);\n    updateDispatch(category, val);\n  };\n\n  let handleUpdateCatetory = val => {\n    setCategory(val);\n    updateDispatch(val, alpha);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Horizen, {\n        list: categoryTypes,\n        title: \"分类 (默认热门):\",\n        handleClick: val => handleUpdateCatetory(val),\n        oldVal: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Horizen, {\n        list: alphaTypes,\n        title: \"首字母:\",\n        handleClick: val => handleUpdateAlpha(val),\n        oldVal: alpha\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ListContainer, {\n      children: /*#__PURE__*/_jsxDEV(Scroll, {\n        children: renderSingerList()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Singers, \"35gW0cPWhyqkyAFx+whytA3q79Q=\");\n\n_c = Singers;\nexport default connect(mapStateToProps, mapDispatchToProps)( /*#__PURE__*/React.memo(Singers));\n\nvar _c;\n\n$RefreshReg$(_c, \"Singers\");","map":{"version":3,"sources":["C:/Users/86136/Desktop/学习进度/new_html/fullstack_yyf/react/cloud-music/src/application/Singers/index.js"],"names":["React","useState","useEffect","Horizen","categoryTypes","alphaTypes","NavContainer","ListContainer","List","ListItem","getSingerList","getHotSingerList","changeEnterLoading","changePageCount","refreshMoreSingerList","changePullUpLoading","changePullDownLoading","refreshMoreHotSingerList","Scroll","connect","singerList","map","item","picUrl","name","accountId","renderSingerList","index","mapStateToProps","state","getIn","enterLoading","pullUpLoading","pullDownLoading","pageCount","mapDispatchToProps","dispatch","getHotSingerDispatch","updateDispatch","category","alpha","pullUpRefreshDispatch","hot","count","pullDownRefreshDispatch","Singers","props","setCategory","setAlpha","handleUpdateAlpha","val","handleUpdateCatetory","memo"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,SAASC,aAAT,EAAwBC,UAAxB,QAA2C,kBAA3C;AACA,SAAUC,YAAV,EACQC,aADR,EAEQC,IAFR,EAGQC,QAHR,QAIW,SAJX;AAKA,SACQC,aADR,EAEQC,gBAFR,EAGQC,kBAHR,EAIQC,eAJR,EAKQC,qBALR,EAMQC,mBANR,EAOQC,qBAPR,EAQQC,wBARR,QASW,wBATX;AAUA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,SAASC,OAAT,QAAwB,aAAxB;;AAGA,MAAMC,UAAU,GAAG,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,EAAW,CAAX,EAAa,CAAb,EAAe,CAAf,EAAiB,CAAjB,EAAmB,EAAnB,EAAsB,EAAtB,EAAyB,EAAzB,EAA6BC,GAA7B,CAAiCC,IAAI,IAAI;AACxD,SAAO;AACHC,IAAAA,MAAM,EAAE,0EADL;AAEHC,IAAAA,IAAI,EAAE,MAFH;AAGHC,IAAAA,SAAS,EAAE;AAHR,GAAP;AAKH,CANkB,CAAnB,C,CAQA;;AACA,MAAMC,gBAAgB,GAAG,MAAM;AAC3B,sBACI,QAAC,IAAD;AAAA,cAEQN,UAAU,CAACC,GAAX,CAAe,CAACC,IAAD,EAAMK,KAAN,KAAgB;AAC3B,0BACI,QAAC,QAAD;AAAA,gCACA;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,iCACE;AAAK,YAAA,GAAG,EAAG,GAAEL,IAAI,CAACC,MAAO,gBAAzB;AAA0C,YAAA,KAAK,EAAC,MAAhD;AAAuD,YAAA,MAAM,EAAC,MAA9D;AAAqE,YAAA,GAAG,EAAC;AAAzE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADA,eAIA;AAAM,UAAA,SAAS,EAAC,MAAhB;AAAA,oBAAwBD,IAAI,CAACE;AAA7B;AAAA;AAAA;AAAA;AAAA,gBAJA;AAAA,SAAeF,IAAI,CAACG,SAAL,GAAe,EAAf,GAAkBE,KAAjC;AAAA;AAAA;AAAA;AAAA,cADJ;AAQH,KATD;AAFR;AAAA;AAAA;AAAA;AAAA,UADJ;AAgBH,CAjBD;;AAmBA,MAAMC,eAAe,GAAIC,KAAD,KAAY;AAChCT,EAAAA,UAAU,EAAES,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,YAAZ,CAAZ,CADoB;AAEhCC,EAAAA,YAAY,EAAEF,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,cAAZ,CAAZ,CAFkB;AAGhCE,EAAAA,aAAa,EAAEH,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,eAAZ,CAAZ,CAHiB;AAIhCG,EAAAA,eAAe,EAAEJ,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,iBAAZ,CAAZ,CAJe;AAKhCI,EAAAA,SAAS,EAAEL,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,WAAZ,CAAZ;AALqB,CAAZ,CAAxB;;AAQA,MAAMK,kBAAkB,GAAIC,QAAD,IAAc;AACrC,SAAM;AACFC,IAAAA,oBAAoB,GAAE;AAClBD,MAAAA,QAAQ,CAACzB,gBAAgB,EAAjB,CAAR;AACH,KAHC;;AAIF2B,IAAAA,cAAc,CAACC,QAAD,EAAUC,KAAV,EAAgB;AAC1BJ,MAAAA,QAAQ,CAACvB,eAAe,CAAC,CAAD,CAAhB,CAAR,CAD0B,CACI;;AAC9BuB,MAAAA,QAAQ,CAACxB,kBAAkB,CAAC,IAAD,CAAnB,CAAR,CAF0B,CAEU;;AACpCwB,MAAAA,QAAQ,CAAC1B,aAAa,CAAC6B,QAAD,EAAUC,KAAV,CAAd,CAAR;AACH,KARC;;AASF;AACAC,IAAAA,qBAAqB,CAACF,QAAD,EAAUC,KAAV,EAAgBE,GAAhB,EAAoBC,KAApB,EAA0B;AAC3CP,MAAAA,QAAQ,CAACpB,qBAAqB,CAAC,IAAD,CAAtB,CAAR;AACAoB,MAAAA,QAAQ,CAACvB,eAAe,CAAC8B,KAAK,GAAG,CAAT,CAAhB,CAAR;;AACA,UAAGD,GAAH,EAAO;AACHN,QAAAA,QAAQ,CAACtB,qBAAqB,EAAtB,CAAR;AACH,OAFD,MAEM;AACFsB,QAAAA,QAAQ,CAACtB,qBAAqB,CAACyB,QAAD,EAAUC,KAAV,CAAtB,CAAR;AACH;AACJ,KAlBC;;AAmBF;AACAI,IAAAA,uBAAuB,CAACL,QAAD,EAAUC,KAAV,EAAgB;AACnCJ,MAAAA,QAAQ,CAACrB,mBAAmB,CAAC,IAAD,CAApB,CAAR;AACAqB,MAAAA,QAAQ,CAACvB,eAAe,CAAC,CAAD,CAAhB,CAAR,CAFmC,CAEP;;AAC5B,UAAG0B,QAAQ,KAAK,EAAb,IAAmBC,KAAK,KAAK,EAAhC,EAAmC;AAC/BJ,QAAAA,QAAQ,CAACzB,gBAAgB,EAAjB,CAAR;AACH,OAFD,MAEM;AACFyB,QAAAA,QAAQ,CAAC1B,aAAa,CAAC6B,QAAD,EAAUC,KAAV,CAAd,CAAR;AACH;AACJ;;AA5BC,GAAN;AA8BH,CA/BD;;AAiCA,SAASK,OAAT,CAAiBC,KAAjB,EAAuB;AAAA;;AACnB,MAAI,CAACP,QAAD,EAAWQ,WAAX,IAA0B9C,QAAQ,CAAE,EAAF,CAAtC;AACA,MAAI,CAACuC,KAAD,EAAQQ,QAAR,IAAoB/C,QAAQ,CAAE,EAAF,CAAhC;;AAEA,MAAIgD,iBAAiB,GAAIC,GAAD,IAAS;AAC7BF,IAAAA,QAAQ,CAACE,GAAD,CAAR;AACAZ,IAAAA,cAAc,CAACC,QAAD,EAAWW,GAAX,CAAd;AACD,GAHH;;AAKE,MAAIC,oBAAoB,GAAID,GAAD,IAAS;AAClCH,IAAAA,WAAW,CAACG,GAAD,CAAX;AACAZ,IAAAA,cAAc,CAACY,GAAD,EAAMV,KAAN,CAAd;AACD,GAHD;;AAKF,sBACI;AAAA,4BACI,QAAC,YAAD;AAAA,8BACA,QAAC,OAAD;AACI,QAAA,IAAI,EAAEpC,aADV;AAEI,QAAA,KAAK,EAAE,YAFX;AAGI,QAAA,WAAW,EAAG8C,GAAD,IAAQC,oBAAoB,CAACD,GAAD,CAH7C;AAII,QAAA,MAAM,EAAEX;AAJZ;AAAA;AAAA;AAAA;AAAA,cADA,eAMA,QAAC,OAAD;AACI,QAAA,IAAI,EAAElC,UADV;AAEI,QAAA,KAAK,EAAE,MAFX;AAGI,QAAA,WAAW,EAAE6C,GAAG,IAAID,iBAAiB,CAAEC,GAAF,CAHzC;AAII,QAAA,MAAM,EAAEV;AAJZ;AAAA;AAAA;AAAA;AAAA,cANA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAaI,QAAC,aAAD;AAAA,6BACI,QAAC,MAAD;AAAA,kBACKd,gBAAgB;AADrB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAqBH;;GAnCQmB,O;;KAAAA,O;AAsCT,eAAe1B,OAAO,CAACS,eAAD,EAAkBO,kBAAlB,CAAP,eAA6CnC,KAAK,CAACoD,IAAN,CAAWP,OAAX,CAA7C,CAAf","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport Horizen from '../../baseUI/horizen-item';\r\nimport { categoryTypes ,alphaTypes  } from '../../api/config';\r\nimport {  NavContainer,\r\n        ListContainer,\r\n        List,\r\n        ListItem\r\n    } from './style'\r\nimport { \r\n        getSingerList, \r\n        getHotSingerList, \r\n        changeEnterLoading, \r\n        changePageCount, \r\n        refreshMoreSingerList, \r\n        changePullUpLoading, \r\n        changePullDownLoading, \r\n        refreshMoreHotSingerList \r\n    } from './store/actionCreators';\r\nimport Scroll from \"../../baseUI/scroll\";\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst singerList = [1,2,3,4,5,6,7,8,9,10,11,12].map(item => {\r\n    return {\r\n        picUrl: \"https://p2.music.126.net/uTwOm8AEFFX_BYHvfvFcmQ==/109951164232057952.jpg\",\r\n        name: \"隔壁老樊\",\r\n        accountId: 277313426,\r\n    }\r\n});\r\n\r\n// 渲染函数 返回歌手列表\r\nconst renderSingerList = () => {\r\n    return (\r\n        <List>\r\n            {\r\n                singerList.map((item,index) => {\r\n                    return (\r\n                        <ListItem key={item.accountId+\"\"+index}>\r\n                        <div className=\"img_wrapper\">\r\n                          <img src={`${item.picUrl}?param=300x300`} width=\"100%\" height=\"100%\" alt=\"music\"/>\r\n                        </div>\r\n                        <span className=\"name\">{item.name}</span>\r\n                      </ListItem>\r\n                    )\r\n                })\r\n            }\r\n        </List>\r\n    )\r\n} \r\n\r\nconst mapStateToProps = (state) => ({\r\n    singerList: state.getIn(['singers', 'singerList']),\r\n    enterLoading: state.getIn(['singers', 'enterLoading']),\r\n    pullUpLoading: state.getIn(['singers', 'pullUpLoading']),\r\n    pullDownLoading: state.getIn(['singers', 'pullDownLoading']),\r\n    pageCount: state.getIn(['singers', 'pageCount'])\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return{\r\n        getHotSingerDispatch(){\r\n            dispatch(getHotSingerList());\r\n        },\r\n        updateDispatch(category,alpha){\r\n            dispatch(changePageCount(0)); //由于改变了分类,所以 pageCount 清零\r\n            dispatch(changeEnterLoading(true)); //loading，现在实现控制逻辑，效果实现放到下一节，后面的loading同理\r\n            dispatch(getSingerList(category,alpha));\r\n        },\r\n        //滑到最底部刷新部分的处理\r\n        pullUpRefreshDispatch(category,alpha,hot,count){\r\n            dispatch(changePullDownLoading(true));\r\n            dispatch(changePageCount(count + 1));\r\n            if(hot){\r\n                dispatch(refreshMoreSingerList());\r\n            }else {\r\n                dispatch(refreshMoreSingerList(category,alpha));\r\n            }\r\n        },\r\n        //顶部下拉刷新\r\n        pullDownRefreshDispatch(category,alpha){\r\n            dispatch(changePullUpLoading(true));\r\n            dispatch(changePageCount(0))//属于重新获取数据\r\n            if(category === '' && alpha === ''){\r\n                dispatch(getHotSingerList());\r\n            }else {\r\n                dispatch(getSingerList(category,alpha));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction Singers(props){\r\n    let [category, setCategory] = useState ('');\r\n    let [alpha, setAlpha] = useState ('');\r\n\r\n    let handleUpdateAlpha = (val) => {\r\n        setAlpha(val);\r\n        updateDispatch(category, val);\r\n      };\r\n    \r\n      let handleUpdateCatetory = (val) => {\r\n        setCategory(val);\r\n        updateDispatch(val, alpha);\r\n      };\r\n\r\n    return (\r\n        <div>\r\n            <NavContainer>\r\n            <Horizen \r\n                list={categoryTypes} \r\n                title={\"分类 (默认热门):\"} \r\n                handleClick={(val) =>handleUpdateCatetory(val)} \r\n                oldVal={category}></Horizen>\r\n            <Horizen \r\n                list={alphaTypes} \r\n                title={\"首字母:\"} \r\n                handleClick={val => handleUpdateAlpha (val)} \r\n                oldVal={alpha}></Horizen>\r\n            </NavContainer>\r\n            <ListContainer>\r\n                <Scroll>\r\n                    {renderSingerList()}\r\n                </Scroll>\r\n            </ListContainer>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Singers));"]},"metadata":{},"sourceType":"module"}