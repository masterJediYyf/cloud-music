{"ast":null,"code":"import _toConsumableArray from\"C:/Users/86136/Desktop/\\u5B66\\u4E60\\u8FDB\\u5EA6/new_html/fullstack_yyf/react/cloud-music/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{getHotSingerListRequest,getSingerListRequest}from\"../../../api/request\";import{CHANGE_SINGER_LIST,CHANGE_CATOGORY,CHANGE_ALPHA,CHANGE_PAGE_COUNT,CHANGE_PULLUP_LOADING,CHANGE_PULLDOWN_LOADING,CHANGE_ENTER_LOADING}from'./constants';import{fromJS}from'immutable';export var changeCategory=function changeCategory(data){return{type:CHANGE_CATOGORY,data:data};};export var changeAlpha=function changeAlpha(data){return{type:CHANGE_ALPHA,data:data};};var changeSingerList=function changeSingerList(data){return{type:CHANGE_SINGER_LIST,data:fromJS(data)};};export var changePageCount=function changePageCount(data){return{type:CHANGE_PAGE_COUNT,data:data};};//进场loading\nexport var changeEnterLoading=function changeEnterLoading(data){return{type:CHANGE_ENTER_LOADING,data:data};};//滑动最底部loading\nexport var changePullUpLoading=function changePullUpLoading(data){return{type:CHANGE_PULLUP_LOADING,data:data};};//顶部下拉刷新loading\nexport var changePullDownLoading=function changePullDownLoading(data){return{type:CHANGE_PULLDOWN_LOADING,data:data};};export var getHotSingerList=function getHotSingerList(){return function(dispatch){getHotSingerListRequest(0).then(function(res){var data=res.artists;dispatch(changeSingerList(data));dispatch(changeEnterLoading(false));dispatch(changePullDownLoading(false));}).catch(function(){console.log('热门歌手数据获取失败');});};};export var refreshMoreHotSingerList=function refreshMoreHotSingerList(){return function(dispatch,getState){var pageCount=getState().getIn(['singers','pageCount']);var singerList=getState().getIn(['singers','singerList']).toJS();getHotSingerListRequest(pageCount).then(function(res){var data=[].concat(_toConsumableArray(singerList),_toConsumableArray(res.artists));dispatch(changeSingerList(data));dispatch(changePullUpLoading(false));}).catch(function(){console.log('热门歌手数据获取失败');});};};export var getSingerList=function getSingerList(category,alpha){return function(dispatch,getState){getSingerListRequest(category,alpha,0).then(function(res){var data=res.artists;dispatch(changeSingerList(data));dispatch(changeEnterLoading(false));dispatch(changePullDownLoading(false));}).catch(function(){console.log('歌手数据获取失败');});};};export var refreshMoreSingerList=function refreshMoreSingerList(category,alpha){return function(dispatch,getState){var pageCount=getState().getIn(['singers','pageCount']);var singerList=getState().getIn(['singers','singerList']).toJS();getSingerListRequest(category,alpha,pageCount).then(function(res){var data=[].concat(_toConsumableArray(singerList),_toConsumableArray(res.artists));dispatch(changeSingerList(data));dispatch(changePullUpLoading(false));}).catch(function(){console.log('歌手数据获取失败');});};};","map":{"version":3,"sources":["C:/Users/86136/Desktop/学习进度/new_html/fullstack_yyf/react/cloud-music/src/application/Singers/store/actionCreators.js"],"names":["getHotSingerListRequest","getSingerListRequest","CHANGE_SINGER_LIST","CHANGE_CATOGORY","CHANGE_ALPHA","CHANGE_PAGE_COUNT","CHANGE_PULLUP_LOADING","CHANGE_PULLDOWN_LOADING","CHANGE_ENTER_LOADING","fromJS","changeCategory","data","type","changeAlpha","changeSingerList","changePageCount","changeEnterLoading","changePullUpLoading","changePullDownLoading","getHotSingerList","dispatch","then","res","artists","catch","console","log","refreshMoreHotSingerList","getState","pageCount","getIn","singerList","toJS","getSingerList","category","alpha","refreshMoreSingerList"],"mappings":"uNAAA,OACEA,uBADF,CAEEC,oBAFF,KAGO,sBAHP,CAIA,OACEC,kBADF,CAEEC,eAFF,CAGEC,YAHF,CAIEC,iBAJF,CAKEC,qBALF,CAMEC,uBANF,CAOEC,oBAPF,KAQO,aARP,CASA,OACEC,MADF,KAEO,WAFP,CAIA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,IAAD,QAAW,CACvCC,IAAI,CAAET,eADiC,CAEvCQ,IAAI,CAAJA,IAFuC,CAAX,EAAvB,CAKP,MAAO,IAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACF,IAAD,QAAW,CACpCC,IAAI,CAAER,YAD8B,CAEpCO,IAAI,CAAJA,IAFoC,CAAX,EAApB,CAKP,GAAMG,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACH,IAAD,QAAW,CAClCC,IAAI,CAAEV,kBAD4B,CAElCS,IAAI,CAAEF,MAAM,CAACE,IAAD,CAFsB,CAAX,EAAzB,CAKA,MAAO,IAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACJ,IAAD,QAAW,CACxCC,IAAI,CAAEP,iBADkC,CAExCM,IAAI,CAAJA,IAFwC,CAAX,EAAxB,CAKP;AACA,MAAO,IAAMK,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACL,IAAD,QAAW,CAC3CC,IAAI,CAAEJ,oBADqC,CAE3CG,IAAI,CAAJA,IAF2C,CAAX,EAA3B,CAKP;AACA,MAAO,IAAMM,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACN,IAAD,QAAW,CAC5CC,IAAI,CAAEN,qBADsC,CAE5CK,IAAI,CAAJA,IAF4C,CAAX,EAA5B,CAKP;AACA,MAAO,IAAMO,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACP,IAAD,QAAW,CAC9CC,IAAI,CAAEL,uBADwC,CAE9CI,IAAI,CAAJA,IAF8C,CAAX,EAA9B,CAMP,MAAO,IAAMQ,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CACpC,MAAO,UAACC,QAAD,CAAc,CACnBpB,uBAAuB,CAAC,CAAD,CAAvB,CAA2BqB,IAA3B,CAAgC,SAAAC,GAAG,CAAI,CACrC,GAAMX,CAAAA,IAAI,CAAGW,GAAG,CAACC,OAAjB,CACAH,QAAQ,CAACN,gBAAgB,CAACH,IAAD,CAAjB,CAAR,CACAS,QAAQ,CAACJ,kBAAkB,CAAC,KAAD,CAAnB,CAAR,CACAI,QAAQ,CAACF,qBAAqB,CAAC,KAAD,CAAtB,CAAR,CACD,CALD,EAKGM,KALH,CAKS,UAAM,CACbC,OAAO,CAACC,GAAR,CAAY,YAAZ,EACD,CAPD,EAQD,CATD,CAUD,CAXM,CAYP,MAAO,IAAMC,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,EAAM,CAC5C,MAAO,UAACP,QAAD,CAAWQ,QAAX,CAAwB,CAC7B,GAAMC,CAAAA,SAAS,CAAGD,QAAQ,GAAGE,KAAX,CAAiB,CAAC,SAAD,CAAY,WAAZ,CAAjB,CAAlB,CACA,GAAMC,CAAAA,UAAU,CAAGH,QAAQ,GAAGE,KAAX,CAAiB,CAAC,SAAD,CAAY,YAAZ,CAAjB,EAA4CE,IAA5C,EAAnB,CACAhC,uBAAuB,CAAC6B,SAAD,CAAvB,CAAmCR,IAAnC,CAAwC,SAAAC,GAAG,CAAI,CAC7C,GAAMX,CAAAA,IAAI,8BAAOoB,UAAP,qBAAsBT,GAAG,CAACC,OAA1B,EAAV,CACAH,QAAQ,CAACN,gBAAgB,CAACH,IAAD,CAAjB,CAAR,CACAS,QAAQ,CAACH,mBAAmB,CAAC,KAAD,CAApB,CAAR,CACD,CAJD,EAIGO,KAJH,CAIS,UAAM,CACbC,OAAO,CAACC,GAAR,CAAY,YAAZ,EACD,CAND,EAOD,CAVD,CAWD,CAZM,CAgBP,MAAO,IAAMO,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,QAAD,CAAWC,KAAX,CAAqB,CAChD,MAAO,UAACf,QAAD,CAAWQ,QAAX,CAAwB,CAC7B3B,oBAAoB,CAACiC,QAAD,CAAWC,KAAX,CAAkB,CAAlB,CAApB,CAAyCd,IAAzC,CAA8C,SAAAC,GAAG,CAAI,CACnD,GAAMX,CAAAA,IAAI,CAAGW,GAAG,CAACC,OAAjB,CACAH,QAAQ,CAACN,gBAAgB,CAACH,IAAD,CAAjB,CAAR,CACAS,QAAQ,CAACJ,kBAAkB,CAAC,KAAD,CAAnB,CAAR,CACAI,QAAQ,CAACF,qBAAqB,CAAC,KAAD,CAAtB,CAAR,CACD,CALD,EAKGM,KALH,CAKS,UAAM,CACbC,OAAO,CAACC,GAAR,CAAY,UAAZ,EACD,CAPD,EAQD,CATD,CAUD,CAXM,CAaP,MAAO,IAAMU,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACF,QAAD,CAAWC,KAAX,CAAqB,CACxD,MAAO,UAACf,QAAD,CAAWQ,QAAX,CAAwB,CAC7B,GAAMC,CAAAA,SAAS,CAAGD,QAAQ,GAAGE,KAAX,CAAiB,CAAC,SAAD,CAAY,WAAZ,CAAjB,CAAlB,CACA,GAAMC,CAAAA,UAAU,CAAGH,QAAQ,GAAGE,KAAX,CAAiB,CAAC,SAAD,CAAY,YAAZ,CAAjB,EAA4CE,IAA5C,EAAnB,CACA/B,oBAAoB,CAACiC,QAAD,CAAWC,KAAX,CAAkBN,SAAlB,CAApB,CAAiDR,IAAjD,CAAsD,SAAAC,GAAG,CAAI,CAC3D,GAAMX,CAAAA,IAAI,8BAAOoB,UAAP,qBAAsBT,GAAG,CAACC,OAA1B,EAAV,CACAH,QAAQ,CAACN,gBAAgB,CAACH,IAAD,CAAjB,CAAR,CACAS,QAAQ,CAACH,mBAAmB,CAAC,KAAD,CAApB,CAAR,CACD,CAJD,EAIGO,KAJH,CAIS,UAAM,CACbC,OAAO,CAACC,GAAR,CAAY,UAAZ,EACD,CAND,EAOD,CAVD,CAWD,CAZM","sourcesContent":["import {\r\n  getHotSingerListRequest,\r\n  getSingerListRequest\r\n} from \"../../../api/request\";\r\nimport {\r\n  CHANGE_SINGER_LIST,\r\n  CHANGE_CATOGORY,\r\n  CHANGE_ALPHA,\r\n  CHANGE_PAGE_COUNT,\r\n  CHANGE_PULLUP_LOADING,\r\n  CHANGE_PULLDOWN_LOADING,\r\n  CHANGE_ENTER_LOADING\r\n} from './constants';\r\nimport {\r\n  fromJS\r\n} from 'immutable';\r\n\r\nexport const changeCategory = (data) => ({\r\n  type: CHANGE_CATOGORY,\r\n  data\r\n});\r\n\r\nexport const changeAlpha = (data) => ({\r\n  type: CHANGE_ALPHA,\r\n  data\r\n});\r\n\r\nconst changeSingerList = (data) => ({\r\n  type: CHANGE_SINGER_LIST,\r\n  data: fromJS(data)\r\n});\r\n\r\nexport const changePageCount = (data) => ({\r\n  type: CHANGE_PAGE_COUNT,\r\n  data\r\n});\r\n\r\n//进场loading\r\nexport const changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data\r\n});\r\n\r\n//滑动最底部loading\r\nexport const changePullUpLoading = (data) => ({\r\n  type: CHANGE_PULLUP_LOADING,\r\n  data\r\n});\r\n\r\n//顶部下拉刷新loading\r\nexport const changePullDownLoading = (data) => ({\r\n  type: CHANGE_PULLDOWN_LOADING,\r\n  data\r\n});\r\n\r\n\r\nexport const getHotSingerList = () => {\r\n  return (dispatch) => {\r\n    getHotSingerListRequest(0).then(res => {\r\n      const data = res.artists;\r\n      dispatch(changeSingerList(data));\r\n      dispatch(changeEnterLoading(false));\r\n      dispatch(changePullDownLoading(false));\r\n    }).catch(() => {\r\n      console.log('热门歌手数据获取失败');\r\n    })\r\n  }\r\n};\r\nexport const refreshMoreHotSingerList = () => {\r\n  return (dispatch, getState) => {\r\n    const pageCount = getState().getIn(['singers', 'pageCount']);\r\n    const singerList = getState().getIn(['singers', 'singerList']).toJS();\r\n    getHotSingerListRequest(pageCount).then(res => {\r\n      const data = [...singerList, ...res.artists];\r\n      dispatch(changeSingerList(data));\r\n      dispatch(changePullUpLoading(false));\r\n    }).catch(() => {\r\n      console.log('热门歌手数据获取失败');\r\n    });\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const getSingerList = (category, alpha) => {\r\n  return (dispatch, getState) => {\r\n    getSingerListRequest(category, alpha, 0).then(res => {\r\n      const data = res.artists;\r\n      dispatch(changeSingerList(data));\r\n      dispatch(changeEnterLoading(false));\r\n      dispatch(changePullDownLoading(false));\r\n    }).catch(() => {\r\n      console.log('歌手数据获取失败');\r\n    });\r\n  }\r\n};\r\n\r\nexport const refreshMoreSingerList = (category, alpha) => {\r\n  return (dispatch, getState) => {\r\n    const pageCount = getState().getIn(['singers', 'pageCount']);\r\n    const singerList = getState().getIn(['singers', 'singerList']).toJS();\r\n    getSingerListRequest(category, alpha, pageCount).then(res => {\r\n      const data = [...singerList, ...res.artists];\r\n      dispatch(changeSingerList(data));\r\n      dispatch(changePullUpLoading(false));\r\n    }).catch(() => {\r\n      console.log('歌手数据获取失败');\r\n    });\r\n  }\r\n};"]},"metadata":{},"sourceType":"module"}