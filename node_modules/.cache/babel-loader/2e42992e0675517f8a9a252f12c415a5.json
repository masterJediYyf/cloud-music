{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\86136\\\\Desktop\\\\\\u5B66\\u4E60\\u8FDB\\u5EA6\\\\new_html\\\\fullstack_yyf\\\\react\\\\cloud-music\\\\src\\\\baseUI\\\\search-box\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect, useMemo } from 'react';\nimport styled from 'styled-components';\nimport style from '../../assets/global-style';\nimport { debounce } from './../../api/utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchBoxWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 6px;\n  padding-right: 20px;\n  height: 40px;\n  background: ${style[\"theme-color\"]};\n  .icon-back{\n    font-size: 24px;\n    color: ${style[\"font-color-light\"]};\n  }\n  .box{\n    flex: 1;\n    margin: 0 5px;\n    line-height: 18px;\n    background: ${style[\"theme-color\"]};\n    color: ${style[\"highlight-background-color\"]};\n    font-size: ${style[\"font-size-m\"]};\n    outline: none;\n    border: none;\n    border-bottom: 1px solid ${style[\"border-color\"]};\n    &::placeholder{\n      color: ${style[\"font-color-light\"]};\n    }\n  }\n  .icon-delete{\n    font-size: 16px;\n    color: ${style[\"background-color\"]};\n  }\n`;\n_c = SearchBoxWrapper;\n\nconst SearchBox = props => {\n  _s();\n\n  const queryRef = useRef();\n  const [query, setQuery] = useState('');\n  const {\n    newQuery\n  } = props;\n  const {\n    handleQuery\n  } = props;\n  let handleQueryDebounce = useMemo(() => {\n    return debounce(handleQuery, 500);\n  }, [handleQuery]);\n  useEffect(() => {\n    queryRef.current.focus();\n  }, []);\n  useEffect(() => {\n    handleQueryDebounce(query); // eslint-disable-next-line \n  }, [query]);\n  useEffect(() => {\n    let curQuery = query;\n\n    if (newQuery !== query) {\n      curQuery = newQuery;\n      queryRef.current.value = newQuery;\n    }\n\n    setQuery(curQuery); // eslint-disable-next-line\n  }, [newQuery]);\n\n  const handleChange = e => {\n    let val = e.currentTarget.value;\n    setQuery(val);\n  };\n\n  const clearQuery = () => {\n    setQuery('');\n    queryRef.current.value = '';\n    queryRef.current.focus();\n  };\n\n  const displayStyle = query ? {\n    display: 'block'\n  } : {\n    display: 'none'\n  };\n  return /*#__PURE__*/_jsxDEV(SearchBoxWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"iconfont icon-back\",\n      onClick: () => props.back(),\n      children: \"\\uE655\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: queryRef,\n      className: \"box\",\n      placeholder: \"\\u641C\\u7D22\\u6B4C\\u66F2\\u3001\\u6B4C\\u624B\\u3001\\u4E13\\u8F91\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"iconfont icon-delete\",\n      onClick: clearQuery,\n      style: displayStyle,\n      children: \"\\uE600\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SearchBox, \"pW6zHqzMcu3geBnvutcl4SQjaQ4=\");\n\n_c2 = SearchBox;\nexport default _c3 = /*#__PURE__*/React.memo(SearchBox);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"SearchBoxWrapper\");\n$RefreshReg$(_c2, \"SearchBox\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"sources":["C:/Users/86136/Desktop/学习进度/new_html/fullstack_yyf/react/cloud-music/src/baseUI/search-box/index.js"],"names":["React","useRef","useState","useEffect","useMemo","styled","style","debounce","SearchBoxWrapper","div","SearchBox","props","queryRef","query","setQuery","newQuery","handleQuery","handleQueryDebounce","current","focus","curQuery","value","handleChange","e","val","currentTarget","clearQuery","displayStyle","display","back","memo"],"mappings":"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","sourcesContent":["import React, {useRef, useState, useEffect, useMemo} from 'react';\r\nimport styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\nimport { debounce } from './../../api/utils';\r\n\r\nconst SearchBoxWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  padding: 0 6px;\r\n  padding-right: 20px;\r\n  height: 40px;\r\n  background: ${style[\"theme-color\"]};\r\n  .icon-back{\r\n    font-size: 24px;\r\n    color: ${style[\"font-color-light\"]};\r\n  }\r\n  .box{\r\n    flex: 1;\r\n    margin: 0 5px;\r\n    line-height: 18px;\r\n    background: ${style[\"theme-color\"]};\r\n    color: ${style[\"highlight-background-color\"]};\r\n    font-size: ${style[\"font-size-m\"]};\r\n    outline: none;\r\n    border: none;\r\n    border-bottom: 1px solid ${style[\"border-color\"]};\r\n    &::placeholder{\r\n      color: ${style[\"font-color-light\"]};\r\n    }\r\n  }\r\n  .icon-delete{\r\n    font-size: 16px;\r\n    color: ${style[\"background-color\"]};\r\n  }\r\n`\r\n\r\nconst SearchBox = (props) => {\r\n  const queryRef = useRef();\r\n  const [query, setQuery] = useState('');\r\n\r\n  const { newQuery } = props;\r\n  const { handleQuery } = props;\r\n\r\n  let handleQueryDebounce = useMemo(() => {\r\n    return debounce(handleQuery, 500);\r\n  }, [handleQuery]);\r\n\r\n  useEffect(() => {\r\n    queryRef.current.focus();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    handleQueryDebounce(query);\r\n    // eslint-disable-next-line \r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    let curQuery = query;\r\n    if(newQuery !== query){\r\n      curQuery = newQuery;\r\n      queryRef.current.value = newQuery;\r\n    }\r\n    setQuery(curQuery);\r\n    // eslint-disable-next-line\r\n  }, [newQuery]);\r\n\r\n  const handleChange = (e) => {\r\n    let val = e.currentTarget.value\r\n    setQuery(val);\r\n  };\r\n\r\n  const clearQuery = () => {\r\n    setQuery('');\r\n    queryRef.current.value = '';\r\n    queryRef.current.focus();\r\n  }\r\n  \r\n  const displayStyle = query ? {display: 'block'}: {display: 'none'};\r\n\r\n  return (\r\n    <SearchBoxWrapper>\r\n      <i className=\"iconfont icon-back\" onClick={() => props.back()}>&#xe655;</i>\r\n      <input ref={queryRef} className=\"box\" placeholder=\"搜索歌曲、歌手、专辑\" onChange={handleChange}/>\r\n      <i className=\"iconfont icon-delete\" onClick={clearQuery} style={displayStyle}>&#xe600;</i>\r\n    </SearchBoxWrapper>\r\n  )\r\n};\r\n\r\nexport default React.memo(SearchBox);"]},"metadata":{},"sourceType":"module"}