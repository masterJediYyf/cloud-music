{"ast":null,"code":"/*global getComputedStyle */\nvar defaults = require('lodash.defaults');\n\nvar prefixedEvent = require('prefixed-event');\n\nvar loadStyles = require('load-styles');\n\nvar createAnimation = require('./lib/create-keyframe-animation');\n\nvar animationProperty = require('./lib/animation-property');\n\nvar promisify = require('native-promisify-if-present');\n\nvar addUnit = require('./lib/add-unit'); // make portions of this server testable\n\n\nif (typeof window !== 'undefined') {\n  var transformProperty = require('transform-property');\n} // our storage for registered animations\n\n\nvar registeredAnimations = {};\nvar mainDefaults = {\n  duration: 1000,\n  fillMode: 'both',\n  easing: 'ease',\n  iterations: 1,\n  delay: 0,\n  direction: 'normal',\n  resetWhenDone: false,\n  clearTransformsBeforeStart: false\n};\n\nexports.hasAnimation = function (name) {\n  return registeredAnimations.hasOwnProperty(name);\n};\n\nfunction setAnimationProp(els, val, opts) {\n  var clearTransforms = opts && opts.clearTransforms === true; // we got a collection, potentially\n\n  for (var i = 0, l = els.length; i < l; i++) {\n    // we do both because... chrome does both\n    if (clearTransforms) {\n      clearTransformProp(els[i]);\n    }\n\n    els[i].style[animationProperty] = val;\n  }\n}\n\nfunction clearTransformProp(el) {\n  el.style.transform = '';\n  el.style[transformProperty] = '';\n}\n\nfunction clearAnimationProp(el) {\n  el.style[animationProperty] = '';\n  el.style.animation = '';\n}\n\nfunction setAnimationAsTransform(els, opts) {\n  var clearAnimations = opts && opts.clearAnimations === true; // we got a collection, potentially\n\n  for (var i = 0, l = els.length; i < l; i++) {\n    els[i].style[transformProperty] = getComputedStyle(els[i])[transformProperty];\n    if (clearAnimations) clearAnimationProp(els[i]);\n  }\n}\n\nexports.runAnimation = promisify(function (els, opts, cb) {\n  cb || (cb = function () {});\n\n  if (typeof opts === 'string') {\n    opts = {\n      name: opts\n    };\n  }\n\n  if (!els.length) {\n    els = [els];\n  }\n\n  if (!opts.name) {\n    return cb(Error('must supply animation name'));\n  }\n\n  var found = registeredAnimations[opts.name];\n\n  if (!found) {\n    return cb(Error('no animation named \"' + opts.name + '\" exists'));\n  }\n\n  opts = defaults(opts, found.presets, mainDefaults);\n\n  var animationEnd = function () {\n    prefixedEvent.remove(els[0], 'AnimationEnd', animationEnd);\n\n    if (opts.resetWhenDone) {\n      setAnimationAsTransform(els, {\n        clearAnimations: true\n      });\n    }\n\n    return cb(null, els);\n  };\n\n  prefixedEvent.add(els[0], 'AnimationEnd', animationEnd);\n  var styles = [opts.name, addUnit(opts.duration, 'ms'), opts.easing, opts.iterations, addUnit(opts.delay, 'ms'), opts.direction, opts.fillMode];\n  setAnimationProp(els, styles.join(' '), {\n    clearTransforms: opts.clearTransformsBeforeStart\n  });\n});\n\nexports.unregisterAnimation = function (name) {\n  if (exports.hasAnimation(name)) {\n    var styleEl = registeredAnimations[name].el;\n    styleEl.parentNode.removeChild(styleEl);\n    delete registeredAnimations[name];\n  }\n};\n\nexports.getAnimationCSS = createAnimation;\n\nexports.registerAnimation = function (opts) {\n  exports.unregisterAnimation(opts.name);\n  var el = loadStyles(exports.getAnimationCSS(opts.name, opts.animation));\n  el.setAttribute('data-name', opts.name);\n  registeredAnimations[opts.name] = {\n    el: el,\n    presets: opts.presets || {}\n  };\n};","map":{"version":3,"sources":["C:/Users/86136/Desktop/学习进度/new_html/fullstack_yyf/react/cloud-music/node_modules/create-keyframe-animation/index.js"],"names":["defaults","require","prefixedEvent","loadStyles","createAnimation","animationProperty","promisify","addUnit","window","transformProperty","registeredAnimations","mainDefaults","duration","fillMode","easing","iterations","delay","direction","resetWhenDone","clearTransformsBeforeStart","exports","hasAnimation","name","hasOwnProperty","setAnimationProp","els","val","opts","clearTransforms","i","l","length","clearTransformProp","style","el","transform","clearAnimationProp","animation","setAnimationAsTransform","clearAnimations","getComputedStyle","runAnimation","cb","Error","found","presets","animationEnd","remove","add","styles","join","unregisterAnimation","styleEl","parentNode","removeChild","getAnimationCSS","registerAnimation","setAttribute"],"mappings":"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","sourcesContent":["/*global getComputedStyle */\nvar defaults = require('lodash.defaults')\nvar prefixedEvent = require('prefixed-event')\nvar loadStyles = require('load-styles')\nvar createAnimation = require('./lib/create-keyframe-animation')\nvar animationProperty = require('./lib/animation-property')\nvar promisify = require('native-promisify-if-present')\nvar addUnit = require('./lib/add-unit')\n\n// make portions of this server testable\nif (typeof window !== 'undefined') {\n  var transformProperty = require('transform-property')\n}\n\n// our storage for registered animations\nvar registeredAnimations = {}\n\nvar mainDefaults = {\n  duration: 1000,\n  fillMode: 'both',\n  easing: 'ease',\n  iterations: 1,\n  delay: 0,\n  direction: 'normal',\n  resetWhenDone: false,\n  clearTransformsBeforeStart: false\n}\n\nexports.hasAnimation = function (name) {\n  return registeredAnimations.hasOwnProperty(name)\n}\n\nfunction setAnimationProp (els, val, opts) {\n  var clearTransforms = (opts && opts.clearTransforms === true)\n  // we got a collection, potentially\n  for (var i = 0, l = els.length; i < l; i++) {\n    // we do both because... chrome does both\n    if (clearTransforms) {\n      clearTransformProp(els[i])\n    }\n    els[i].style[animationProperty] = val\n  }\n}\n\nfunction clearTransformProp (el) {\n  el.style.transform = ''\n  el.style[transformProperty] = ''\n}\n\nfunction clearAnimationProp (el) {\n  el.style[animationProperty] = ''\n  el.style.animation = ''\n}\n\nfunction setAnimationAsTransform (els, opts) {\n  var clearAnimations = (opts && opts.clearAnimations === true)\n  // we got a collection, potentially\n  for (var i = 0, l = els.length; i < l; i++) {\n    els[i].style[transformProperty] = getComputedStyle(els[i])[transformProperty]\n    if (clearAnimations) clearAnimationProp(els[i])\n  }\n}\n\nexports.runAnimation = promisify(function (els, opts, cb) {\n  cb || (cb = function () {})\n  if (typeof opts === 'string') {\n    opts = {\n      name: opts\n    }\n  }\n\n  if (!els.length) {\n    els = [els]\n  }\n\n  if (!opts.name) {\n    return cb(Error('must supply animation name'))\n  }\n\n  var found = registeredAnimations[opts.name]\n\n  if (!found) {\n    return cb(Error('no animation named \"' + opts.name + '\" exists'))\n  }\n\n  opts = defaults(opts, found.presets, mainDefaults)\n\n  var animationEnd = function () {\n    prefixedEvent.remove(els[0], 'AnimationEnd', animationEnd)\n    if (opts.resetWhenDone) {\n      setAnimationAsTransform(els, {clearAnimations: true})\n    }\n    return cb(null, els)\n  }\n\n  prefixedEvent.add(els[0], 'AnimationEnd', animationEnd)\n\n  var styles = [\n    opts.name,\n    addUnit(opts.duration, 'ms'),\n    opts.easing,\n    opts.iterations,\n    addUnit(opts.delay, 'ms'),\n    opts.direction,\n    opts.fillMode\n  ]\n\n  setAnimationProp(els, styles.join(' '), {clearTransforms: opts.clearTransformsBeforeStart})\n})\n\nexports.unregisterAnimation = function (name) {\n  if (exports.hasAnimation(name)) {\n    var styleEl = registeredAnimations[name].el\n    styleEl.parentNode.removeChild(styleEl)\n    delete registeredAnimations[name]\n  }\n}\n\nexports.getAnimationCSS = createAnimation\n\nexports.registerAnimation = function (opts) {\n  exports.unregisterAnimation(opts.name)\n  var el = loadStyles(exports.getAnimationCSS(opts.name, opts.animation))\n  el.setAttribute('data-name', opts.name)\n\n  registeredAnimations[opts.name] = {\n    el: el,\n    presets: opts.presets || {}\n  }\n}\n"]},"metadata":{},"sourceType":"script"}